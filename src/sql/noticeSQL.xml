<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE sqlMap PUBLIC '-//ibatis.apache.org//DTD Sql Map 2.0//EN' 'http://ibatis.apache.org/dtd/sql-map-2.dtd'>
<sqlMap namespace="board">

	<typeAlias alias="notice" type="model.noticeVO" />

		<!-- 리절트 맵 정의 -->
	  	<resultMap id="noticeRes" class="notice">
	      	<result property="id" column="Member_ID"/>
		  	<result property="no" column="Notice_NO"/>
		  	<result property="subject" column="Notice_SUBJECT"/>
		  	<result property="content" column="Notice_CONTENT"/>
		  	<result property="count" column="Notice_COUNT" />
		  	<result property="regdate" column="Notice_REGDATE"/>
		</resultMap>
		
		<!-- 공통으로 사용할 select 절 정의 -->
		<sql id="NOTICE-select-all">
			SELECT * FROM NOTICE 
		</sql>
		
		<!-- 공통으로 사용할 where-no 절 정의 -->
		<sql id="NOTICE-where-no">
			WHERE Notice_NO = #no#
		</sql> 
	
	
		<!-- select 쿼리문 정의 -->
		<select id="NOTICE-selectAll" resultMap="noticeRes" parameterClass="int"> 
			<include refid="NOTICE-select-all" />
			ORDER BY Notice_No DESC
		</select>
		
		<select id="NOTICE-selectOne" resultMap="noticeRes" parameterClass="int">
			<include refid="NOTICE-select-all" />
			<include refid="NOTICE-where-no" />
		</select>
		
		<select id="NOTICE-selectLastNo" resultClass="int">
			SELECT max(Notice_No) as No FROM NOTICE 
		</select>
			
		
		<!-- insert 쿼리문 정의 -->
		<insert id="NOTICE-insertBoard" parameterClass="notice">
		
		
      		INSERT INTO NOTICE (Notice_NO, Member_ID, Notice_SUBJECT, Notice_CONTENT,
      		                   Notice_REGDATE, Notice_COUNT)
                VALUES (NOTICE_NO_SEQ.NEXTVAL, #id#, #subject#, #content#, #regdate#, 0)
		</insert>
		
		
		
		<update id="NOTICE-updateBoard" parameterClass="notice">
    		UPDATE NOTICE SET Notice_SUBJECT = #subject#,
                     		     Member_ID = #id#,
                       		     Notice_CONTENT = #content#
		<include refid="NOTICE-where-no" />
   		</update>
        
    	<update id="NOTICE-updateCount" parameterClass="notice">
		UPDATE NOTICE SET Notice_COUNT = Notice_COUNT + 1
		<include refid="NOTICE-where-no" />
	    </update>
    

		
  		  <delete id="NOTICE-deleteBoard" parameterClass="notice">
			DELETE FROM NOTICE 
			<include refid="NOTICE-where-no" />
   		 </delete> 

</sqlMap>